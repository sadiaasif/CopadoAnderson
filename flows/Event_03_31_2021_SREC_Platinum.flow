<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>50.0</apiVersion>
    <assignments>
        <name>Add_Platinum_Membership</name>
        <label>Add Platinum Membership</label>
        <locationX>1295</locationX>
        <locationY>231</locationY>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.OpportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SaleId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.Product2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>01tU0000002vQMzIAM</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.TotalPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>995.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>01uU000000dUjEgIAK</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_to_the_OpportunityLineItem_List_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Tax_Toolbox</name>
        <label>Add Tax Toolbox</label>
        <locationX>1025</locationX>
        <locationY>231</locationY>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.OpportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SaleId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.Product2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>01t6f00000NvJ0tAAF</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.TotalPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OpportunityLineItem.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>01u6f00000JlS9MAAV</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_to_the_OpportunityLineItem_List</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AsnPlatinumCount</name>
        <label>AsnPlatinumCount</label>
        <locationX>466</locationX>
        <locationY>231</locationY>
        <assignmentItems>
            <assignToReference>PlatSaleCount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Sale.Account.Platinum_Sale_Count__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Account_Get_Primary_contact_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Campaign_IDs_0</name>
        <label>Assign Campaign IDs</label>
        <locationX>730</locationX>
        <locationY>231</locationY>
        <assignmentItems>
            <assignToReference>CampaignMemberIDs</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>7016f000001a4r0AAA</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Campaign_Member_Publish_Platform_Event_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to_the_OpportunityLineItem_List</name>
        <label>Assign to the OpportunityLineItem List</label>
        <locationX>1158</locationX>
        <locationY>231</locationY>
        <assignmentItems>
            <assignToReference>OpportunityLineItemList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OpportunityLineItem</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Platinum_Membership</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to_the_OpportunityLineItem_List_0</name>
        <label>Assign to the OpportunityLineItem List</label>
        <locationX>1415</locationX>
        <locationY>231</locationY>
        <assignmentItems>
            <assignToReference>OpportunityLineItemList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OpportunityLineItem</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Insert_OpportunityLineItem_List</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>CreateAsCase1</name>
        <label>CreateAsCase</label>
        <locationX>1885</locationX>
        <locationY>160</locationY>
        <assignmentItems>
            <assignToReference>CreateAsCase</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>CreateASCase_2</name>
        <label>CreateASCase</label>
        <locationX>1889</locationX>
        <locationY>316</locationY>
        <assignmentItems>
            <assignToReference>CreateAsCase</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Case</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Has_Platinum</name>
        <label>Has Platinum?</label>
        <locationX>1660</locationX>
        <locationY>233</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>YesPlatinum</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>PlatSaleCount</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateAsCase1</targetReference>
            </connector>
            <label>YesPlatinum</label>
        </rules>
        <rules>
            <name>NoPlatinum</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>PlatSaleCount</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PlatSaleCount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateASCase_2</targetReference>
            </connector>
            <label>NoPlatinum</label>
        </rules>
    </decisions>
    <formulas>
        <name>OfferPurchaseTextFormula</name>
        <dataType>String</dataType>
        <expression>IF({!EventOfferAutomationText} = &quot;SREC Platinum 03-31-2021&quot;,  {!PurchasedDescriptionOffer1},
IF({!EventOfferAutomationText} = &quot;SIS Tax Bookkeeping Bundle 3/2021&quot;,  {!PurchasedDescriptionOffer2},
IF({!EventOfferAutomationText} = &quot;SIS Legacy Bundle 3/2021 LIVING TRUST&quot;,  {!PurchasedDescriptionOffer3LivingTrust},
IF({!EventOfferAutomationText} = &quot;SIS Legacy Bundle 3/2021 QRP&quot;,  {!PurchasedDescriptionOffer3QRP},
&quot;Purchased package at SIS March 2021&quot;))))</expression>
    </formulas>
    <formulas>
        <name>Wait</name>
        <dataType>DateTime</dataType>
        <expression>{!$Flow.CurrentDateTime} - (1/24)</expression>
    </formulas>
    <interviewLabel>Event - {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Event - 03.31.2021 SREC Platinum</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Insert_OpportunityLineItem_List</name>
        <label>Insert OpportunityLineItem List</label>
        <locationX>1532</locationX>
        <locationY>231</locationY>
        <connector>
            <targetReference>Has_Platinum</targetReference>
        </connector>
        <inputReference>OpportunityLineItemList</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Sale</name>
        <label>Get Sale</label>
        <locationX>337</locationX>
        <locationY>232</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AsnPlatinumCount</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SaleId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Wait_Wait1hour</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Account_Get_Primary_contact_flow</name>
        <label>Account - Get Primary contact flow</label>
        <locationX>584</locationX>
        <locationY>231</locationY>
        <connector>
            <targetReference>Assign_Campaign_IDs_0</targetReference>
        </connector>
        <flowName>Account_Get_Primary_contact_flow</flowName>
        <inputAssignments>
            <name>AccountID</name>
            <value>
                <elementReference>Get_Sale.AccountId</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>contactId</assignToReference>
            <name>ConatctID</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <name>Campaign_Member_Publish_Platform_Event_0</name>
        <label>Campaign Member- Publish Platform Event</label>
        <locationX>880</locationX>
        <locationY>231</locationY>
        <connector>
            <targetReference>Add_Tax_Toolbox</targetReference>
        </connector>
        <flowName>Campaign_Member_Publish_Platform_Event</flowName>
        <inputAssignments>
            <name>CampaignIds</name>
            <value>
                <elementReference>CampaignMemberIDs</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>PrimaryContactID</name>
            <value>
                <elementReference>contactId</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Create_Case</name>
        <label>Create Case</label>
        <locationX>2102</locationX>
        <locationY>232</locationY>
        <flowName>Create_Case_Flow</flowName>
        <inputAssignments>
            <name>AccountID</name>
            <value>
                <elementReference>Get_Sale.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>AsCaseDescription</name>
            <value>
                <elementReference>OfferPurchaseTextFormula</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>AsCaseRequired</name>
            <value>
                <elementReference>CreateAsCase</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>BookkeepingCaseDescription</name>
            <value>
                <elementReference>OfferPurchaseTextFormula</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>CreateFulfilMentCase</name>
            <value>
                <elementReference>CreateFulfimentCase</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>OfferDescription</name>
            <value>
                <elementReference>OfferPurchaseTextFormula</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>SaleId</name>
            <value>
                <elementReference>SaleId</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <textTemplates>
        <name>PurchasedDescriptionOffer1</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Purchased at the Smart Real Estate Coach QLS Live 09.15.2021 event. Platinum membership - $995
2-year tax review
Tax Toolbox
Call client and obtain cc for Platinum subscription</text>
    </textTemplates>
    <textTemplates>
        <name>PurchasedDescriptionOffer2</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Purchased:
SIS Tax &amp; Bookkeeping Bundle - March
$2995
Tax Advantage Program
Tax Toolbox - Digital
2 Tickets to an upcoming Taxwise event in 2021
Virtual Bookkeeping for 1 Year
Anderson Funding Community
Bonus Land Trust</text>
    </textTemplates>
    <textTemplates>
        <name>PurchasedDescriptionOffer3LivingTrust</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Purchased:
Legacy Bundle at SIS - March
$2500
Living Trust or QRP - The client chose Living Trust
Tax Toolbox - Digital
Anderson Funding Community
Virtual Bookkeeping for 1 Year
Bonus Land Trust</text>
    </textTemplates>
    <textTemplates>
        <name>PurchasedDescriptionOffer3QRP</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Purchased:
Legacy Bundle at SIS - March
$2500
Living Trust or QRP - The client chose a QRP
Tax Toolbox - Digital
Anderson Funding Community
Virtual Bookkeeping for 1 Year
Bonus Land Trust</text>
    </textTemplates>
    <variables>
        <name>CampaignMemberIDs</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>contactId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CreateAsCase</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CreateBKCase</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CreateFulfimentCase</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>EventOfferAutomationText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OpportunityLineItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>OpportunityLineItemList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>PlatSaleCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>SaleId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <waits>
        <name>Wait_Wait1hour</name>
        <label>Wait (Wait1hour)</label>
        <locationX>182</locationX>
        <locationY>219</locationY>
        <defaultConnectorLabel>Default Path</defaultConnectorLabel>
        <waitEvents>
            <name>Instant_Pause</name>
            <conditionLogic>and</conditionLogic>
            <connector>
                <targetReference>Get_Sale</targetReference>
            </connector>
            <eventType>AlarmEvent</eventType>
            <inputParameters>
                <name>AlarmTime</name>
                <value>
                    <elementReference>Wait</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffset</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffsetUnit</name>
                <value>
                    <stringValue>Hours</stringValue>
                </value>
            </inputParameters>
            <label>Instant Pause</label>
        </waitEvents>
    </waits>
</Flow>
